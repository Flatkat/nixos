building the system configuration...
error:
       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1566:14:
         1565|         zipAttrsWith (
         1566|           n: values:
             |              ^
         1567|           let

       … while calling the 'head' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1571:13:
         1570|           if length values == 1 || pred here (elemAt values 1) (head values) then
         1571|             head values
             |             ^
         1572|           else

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1182:17:
         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1183:85:
         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:273:71:
          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1083:7:
         1082|     // {
         1083|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1084|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.build.toplevel':

       … while evaluating the attribute 'mergedValue'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1130:5:
         1129|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
         1130|     mergedValue =
             |     ^
         1131|       if isDefined then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1131:7:
         1130|     mergedValue =
         1131|       if isDefined then
             |       ^
         1132|         if all (def: type.check def.value) defsFinal then

       … while evaluating the attribute 'values'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1124:9:
         1123|       {
         1124|         values = defs''';
             |         ^
         1125|         inherit (defs'') highestPrio;

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1118:11:
         1117|           # Avoid sorting if we don't have to.
         1118|           if any (def: def.value._type or "" == "order") defs''.values then
             |           ^
         1119|             sortProperties defs''.values

       … while calling the 'any' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1118:14:
         1117|           # Avoid sorting if we don't have to.
         1118|           if any (def: def.value._type or "" == "order") defs''.values then
             |              ^
         1119|             sortProperties defs''.values

       … while evaluating the attribute 'values'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1251:7:
         1250|     {
         1251|       values = concatMap (def: if getPrio def == highestPrio then [ (strip def) ] else [ ]) defs;
             |       ^
         1252|       inherit highestPrio;

       … while calling the 'concatMap' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1251:16:
         1250|     {
         1251|       values = concatMap (def: if getPrio def == highestPrio then [ (strip def) ] else [ ]) defs;
             |                ^
         1252|       inherit highestPrio;

       … while calling the 'concatMap' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1098:17:
         1097|         # Process mkMerge and mkIf properties.
         1098|         defs' = concatMap (
             |                 ^
         1099|           m:

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1099:11:
         1098|         defs' = concatMap (
         1099|           m:
             |           ^
         1100|           map (

       … while calling the 'map' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1100:11:
         1099|           m:
         1100|           map (
             |           ^
         1101|             value:

       … while evaluating definitions from `/nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/top-level.nix':

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1109:80:
         1108|               }
         1109|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1110|         ) defs;

       … while calling 'dischargeProperties'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1202:5:
         1201|   dischargeProperties =
         1202|     def:
             |     ^
         1203|     if def._type or "" == "merge" then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1203:5:
         1202|     def:
         1203|     if def._type or "" == "merge" then
             |     ^
         1204|       concatMap dischargeProperties def.contents

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:770:21:
          769|             inherit (module) file;
          770|             inherit value;
             |                     ^
          771|           }) module.config

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/top-level.nix:80:26:
           79|   # Handle assertions and warnings
           80|   baseSystemAssertWarn = lib.asserts.checkAssertWarn config.assertions config.warnings baseSystem;
             |                          ^
           81|

       … while calling 'checkAssertWarn'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/asserts.nix:193:27:
          192|   checkAssertWarn =
          193|     assertions: warnings: val:
             |                           ^
          194|     let

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/asserts.nix:200:7:
          199|     else
          200|       showWarnings warnings val;
             |       ^
          201|

       … while calling 'showWarnings'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/trivial.nix:962:28:
          961|
          962|   showWarnings = warnings: res: lib.foldr (w: x: warn w x) res warnings;
             |                            ^
          963|

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/trivial.nix:962:33:
          961|
          962|   showWarnings = warnings: res: lib.foldr (w: x: warn w x) res warnings;
             |                                 ^
          963|

       … while calling 'foldr'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/lists.nix:139:14:
          138|   foldr =
          139|     op: nul: list:
             |              ^
          140|     let

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/lists.nix:144:5:
          143|     in
          144|     fold' 0;
             |     ^
          145|

       … while calling 'fold''
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/lists.nix:142:15:
          141|       len = length list;
          142|       fold' = n: if n == len then nul else op (elemAt list n) (fold' (n + 1));
             |               ^
          143|     in

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/top-level.nix:62:16:
           61|   # makes it bootable. See `activatable-system.nix`.
           62|   baseSystem = pkgs.stdenvNoCC.mkDerivation (
             |                ^
           63|     {

       … while calling 'mkDerivation'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:65:5:
           64|   mkDerivation =
           65|     fnOrAttrs:
             |     ^
           66|     if builtins.isFunction fnOrAttrs then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:66:5:
           65|     fnOrAttrs:
           66|     if builtins.isFunction fnOrAttrs then
             |     ^
           67|       makeDerivationExtensible fnOrAttrs

       … while calling the 'isFunction' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:66:8:
           65|     fnOrAttrs:
           66|     if builtins.isFunction fnOrAttrs then
             |        ^
           67|       makeDerivationExtensible fnOrAttrs

       … in the right operand of the update (//) operator
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/top-level.nix:76:5:
           75|     }
           76|     // config.system.systemBuilderArgs
             |     ^
           77|   );

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/top-level.nix:76:8:
           75|     }
           76|     // config.system.systemBuilderArgs
             |        ^
           77|   );

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1182:17:
         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1183:85:
         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:273:71:
          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1083:7:
         1082|     // {
         1083|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1084|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.systemBuilderArgs':

       … while evaluating the attribute 'mergedValue'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1130:5:
         1129|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
         1130|     mergedValue =
             |     ^
         1131|       if isDefined then

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1133:11:
         1132|         if all (def: type.check def.value) defsFinal then
         1133|           type.merge loc defsFinal
             |           ^
         1134|         else

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:831:22:
          830|                 # Non-lazy merge Function
          831|                 loc: defs:
             |                      ^
          832|                 mapAttrs (n: v: v.value) (

       … while calling the 'mapAttrs' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:832:17:
          831|                 loc: defs:
          832|                 mapAttrs (n: v: v.value) (
             |                 ^
          833|                   filterAttrs (n: v: v ? value) (

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:833:19:
          832|                 mapAttrs (n: v: v.value) (
          833|                   filterAttrs (n: v: v ? value) (
             |                   ^
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType defs).optionalValue)

       … while calling 'filterAttrs'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:23:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                       ^
          658|

       … while calling the 'removeAttrs' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:28:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                            ^
          658|

       … while calling the 'filter' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:45:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                             ^
          658|

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:53:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                     ^
          658|

       … in the argument of the not operator
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:60:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                            ^
          658|

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:60:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                            ^
          658|

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:833:35:
          832|                 mapAttrs (n: v: v.value) (
          833|                   filterAttrs (n: v: v ? value) (
             |                                   ^
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType defs).optionalValue)

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:657:70:
          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                                      ^
          658|

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:834:41:
          833|                   filterAttrs (n: v: v ? value) (
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType defs).optionalValue)
             |                                         ^
          835|                       # Push down position info.

       … while evaluating the attribute 'optionalValue'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1147:5:
         1146|
         1147|     optionalValue = if isDefined then { value = mergedValue; } else { };
             |     ^
         1148|   };

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1147:21:
         1146|
         1147|     optionalValue = if isDefined then { value = mergedValue; } else { };
             |                     ^
         1148|   };

       (8 duplicate frames omitted)

       … while evaluating definitions from `/nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activatable-system.nix':

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1109:80:
         1108|               }
         1109|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1110|         ) defs;

       … while calling 'dischargeProperties'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1202:5:
         1201|   dischargeProperties =
         1202|     def:
             |     ^
         1203|     if def._type or "" == "merge" then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1203:5:
         1202|     def:
         1203|     if def._type or "" == "merge" then
             |     ^
         1204|       concatMap dischargeProperties def.contents

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:774:15:
          773|               inherit (def) file;
          774|               value = v;
             |               ^
          775|             }) def.value

       … while evaluating the attribute 'system.activationScripts.script'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:173:11:
          172|         // {
          173|           script = systemActivationScript set false;
             |           ^
          174|         };

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:173:20:
          172|         // {
          173|           script = systemActivationScript set false;
             |                    ^
          174|         };

       … while calling 'systemActivationScript'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:30:10:
           29|   systemActivationScript =
           30|     set: onlyDry:
             |          ^
           31|     let

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:71:9:
           70|
           71|       ${textClosureMap id withDrySnippets (attrNames withDrySnippets)}
             |         ^
           72|

       … while calling 'textClosureMap'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings-with-deps.nix:168:20:
          167|   textClosureMap =
          168|     f: predefined: names:
             |                    ^
          169|     concatStringsSep "\n" (map f (textClosureList predefined names));

       … while calling the 'concatStringsSep' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings-with-deps.nix:169:5:
          168|     f: predefined: names:
          169|     concatStringsSep "\n" (map f (textClosureList predefined names));
             |     ^
          170|

       … while calling 'id'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/trivial.nix:40:8:
           39|   */
           40|   id = x: x;
             |        ^
           41|

       … while evaluating the attribute 'text'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:17:7:
           16|     // {
           17|       text = ''
             |       ^
           18|         #### Activation script snippet ${a}:

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/activation/activation-script.nix:20:11:
           19|         _localstatus=0
           20|         ${v.text}
             |           ^
           21|

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1182:17:
         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1183:85:
         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:273:71:
          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1083:7:
         1082|     // {
         1083|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1084|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.activationScripts.etc.text':

       (10 duplicate frames omitted)

       … while evaluating definitions from `/nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc-activation.nix':

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1109:80:
         1108|               }
         1109|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1110|         ) defs;

       … while calling 'dischargeProperties'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1202:5:
         1201|   dischargeProperties =
         1202|     def:
             |     ^
         1203|     if def._type or "" == "merge" then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1203:5:
         1202|     def:
         1203|     if def._type or "" == "merge" then
             |     ^
         1204|       concatMap dischargeProperties def.contents

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:770:21:
          769|             inherit (module) file;
          770|             inherit value;
             |                     ^
          771|           }) module.config

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc-activation.nix:19:9:
           18|         "specialfs"
           19|       ] config.system.build.etcActivationCommands;
             |         ^
           20|     }

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1566:14:
         1565|         zipAttrsWith (
         1566|           n: values:
             |              ^
         1567|           let

       … while calling the 'head' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1571:13:
         1570|           if length values == 1 || pred here (elemAt values 1) (head values) then
         1571|             head values
             |             ^
         1572|           else

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:818:27:
          817|                   (
          818|                     name: defs:
             |                           ^
          819|                     let

       … while evaluating the attribute 'optionalValue.value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1147:5:
         1146|
         1147|     optionalValue = if isDefined then { value = mergedValue; } else { };
             |     ^
         1148|   };

       (9 duplicate frames omitted)

       … while evaluating definitions from `/nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc.nix':

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1109:80:
         1108|               }
         1109|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1110|         ) defs;

       … while calling 'dischargeProperties'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1202:5:
         1201|   dischargeProperties =
         1202|     def:
             |     ^
         1203|     if def._type or "" == "merge" then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1203:5:
         1202|     def:
         1203|     if def._type or "" == "merge" then
             |     ^
         1204|       concatMap dischargeProperties def.contents

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:774:15:
          773|               inherit (def) file;
          774|               value = v;
             |               ^
          775|             }) def.value

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:293:73:
          292|       len = length attrPath;
          293|       atDepth = n: if n == len then value else { ${elemAt attrPath n} = atDepth (n + 1); };
             |                                                                         ^
          294|     in

       … while calling 'atDepth'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:293:17:
          292|       len = length attrPath;
          293|       atDepth = n: if n == len then value else { ${elemAt attrPath n} = atDepth (n + 1); };
             |                 ^
          294|     in

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:770:21:
          769|             inherit (module) file;
          770|             inherit value;
             |                     ^
          771|           }) module.config

       … while calling the 'getAttr' builtin
         at <nix/derivation-internal.nix>:50:17:
           49|     value = commonAttrs // {
           50|       outPath = builtins.getAttr outputName strict;
             |                 ^
           51|       drvPath = strict.drvPath;

       … while calling the 'derivationStrict' builtin
         at <nix/derivation-internal.nix>:37:12:
           36|
           37|   strict = derivationStrict drvAttrs;
             |            ^
           38|

       … while evaluating derivation 'etc'
         whose name attribute is located at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'buildCommand' of derivation 'etc'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/trivial-builders/default.nix:80:17:
           79|         enableParallelBuilding = true;
           80|         inherit buildCommand name;
             |                 ^
           81|         passAsFile = [ "buildCommand" ] ++ (derivationArgs.passAsFile or [ ]);

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc.nix:56:11:
           55|         mkdir -p "$out/etc"
           56|         ${lib.concatMapStringsSep "\n" (
             |           ^
           57|           etcEntry:

       … while calling 'concatMapStringsSep'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:231:13:
          230|   concatMapStringsSep =
          231|     sep: f: list:
             |             ^
          232|     concatStringsSep sep (map f list);

       … while calling the 'concatStringsSep' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:232:5:
          231|     sep: f: list:
          232|     concatStringsSep sep (map f list);
             |     ^
          233|

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc.nix:57:11:
           56|         ${lib.concatMapStringsSep "\n" (
           57|           etcEntry:
             |           ^
           58|           lib.escapeShellArgs [

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc.nix:58:11:
           57|           etcEntry:
           58|           lib.escapeShellArgs [
             |           ^
           59|             "makeEtcEntry"

       … while calling 'concatMapStringsSep'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:231:13:
          230|   concatMapStringsSep =
          231|     sep: f: list:
             |             ^
          232|     concatStringsSep sep (map f list);

       … while calling the 'concatStringsSep' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:232:5:
          231|     sep: f: list:
          232|     concatStringsSep sep (map f list);
             |     ^
          233|

       … while calling 'escapeShellArg'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:1171:5:
         1170|   escapeShellArg =
         1171|     arg:
             |     ^
         1172|     let

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:1175:5:
         1174|     in
         1175|     if match "[[:alnum:],._+:@%/-]+" string == null then
             |     ^
         1176|       "'${replaceString "'" "'\\''" string}'"

       … while calling the 'match' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:1175:8:
         1174|     in
         1175|     if match "[[:alnum:],._+:@%/-]+" string == null then
             |        ^
         1176|       "'${replaceString "'" "'\\''" string}'"

       … while evaluating the second argument passed to builtins.match

       … while calling the 'toString' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/strings.nix:1173:16:
         1172|     let
         1173|       string = toString arg;
             |                ^
         1174|     in

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/nixos/modules/system/etc/etc.nix:61:16:
           60|             # Force local source paths to be added to the store
           61|             "${etcEntry.source}"
             |                ^
           62|             etcEntry.target

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1182:17:
         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/attrsets.nix:1183:85:
         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:273:71:
          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1083:7:
         1082|     // {
         1083|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1084|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `environment.etc.dbus-1.source':

       … while evaluating the attribute 'mergedValue'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1130:5:
         1129|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
         1130|     mergedValue =
             |     ^
         1131|       if isDefined then

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1132:9:
         1131|       if isDefined then
         1132|         if all (def: type.check def.value) defsFinal then
             |         ^
         1133|           type.merge loc defsFinal

       … while calling the 'all' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1132:12:
         1131|       if isDefined then
         1132|         if all (def: type.check def.value) defsFinal then
             |            ^
         1133|           type.merge loc defsFinal

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1132:17:
         1131|       if isDefined then
         1132|         if all (def: type.check def.value) defsFinal then
             |                 ^
         1133|           type.merge loc defsFinal

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1132:22:
         1131|       if isDefined then
         1132|         if all (def: type.check def.value) defsFinal then
             |                      ^
         1133|           type.merge loc defsFinal

       … while calling 'check'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:679:15:
          678|             check =
          679|               x:
             |               ^
          680|               let

       … in the right operand of the AND (&&) operator
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:696:15:
          695|               && (inStore == null || inStore == isInStore)
          696|               && (absolute == null || absolute == isAbsolute);
             |               ^
          697|           };

       … in the right operand of the OR (||) operator
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:696:36:
          695|               && (inStore == null || inStore == isInStore)
          696|               && (absolute == null || absolute == isAbsolute);
             |                                    ^
          697|           };

       … while calling the 'substring' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:689:30:
          688|                 );
          689|                 isAbsolute = builtins.substring 0 1 (toString x) == "/";
             |                              ^
          690|                 isExpectedType = (

       … while calling the 'toString' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:689:54:
          688|                 );
          689|                 isAbsolute = builtins.substring 0 1 (toString x) == "/";
             |                                                      ^
          690|                 isExpectedType = (

       … while calling the 'getAttr' builtin
         at <nix/derivation-internal.nix>:50:17:
           49|     value = commonAttrs // {
           50|       outPath = builtins.getAttr outputName strict;
             |                 ^
           51|       drvPath = strict.drvPath;

       … while calling the 'derivationStrict' builtin
         at <nix/derivation-internal.nix>:37:12:
           36|
           37|   strict = derivationStrict drvAttrs;
             |            ^
           38|

       … while evaluating derivation 'dbus-1'
         whose name attribute is located at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'serviceDirectories' of derivation 'dbus-1'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/development/libraries/dbus/make-dbus-conf.nix:19:13:
           18|   {
           19|     inherit serviceDirectories suidHelper apparmor;
             |             ^
           20|     preferLocalBuild = true;

       … while calling anonymous lambda
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/types.nix:710:18:
          709|             loc: defs:
          710|             map (x: x.value) (
             |                  ^
          711|               filter (x: x ? value) (

       … while evaluating the attribute 'value'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/modules.nix:1147:41:
         1146|
         1147|     optionalValue = if isDefined then { value = mergedValue; } else { };
             |                                         ^
         1148|   };

       (11 duplicate frames omitted)

       … while evaluating derivation 'system-path'
         whose name attribute is located at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'passAsFile' of derivation 'system-path'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/trivial-builders/default.nix:81:9:
           80|         inherit buildCommand name;
           81|         passAsFile = [ "buildCommand" ] ++ (derivationArgs.passAsFile or [ ]);
             |         ^
           82|       }

       … while evaluating the attribute 'passAsFile'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:113:9:
          112|         # XXX: The size is somewhat arbitrary
          113|         passAsFile = if builtins.stringLength pkgs >= 128 * 1024 then [ "pkgs" ] else [ ];
             |         ^
          114|       }

       … while evaluating a branch condition
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:113:22:
          112|         # XXX: The size is somewhat arbitrary
          113|         passAsFile = if builtins.stringLength pkgs >= 128 * 1024 then [ "pkgs" ] else [ ];
             |                      ^
          114|       }

       … in the argument of the not operator
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:113:52:
          112|         # XXX: The size is somewhat arbitrary
          113|         passAsFile = if builtins.stringLength pkgs >= 128 * 1024 then [ "pkgs" ] else [ ];
             |                                                    ^
          114|       }

       … while calling the 'lessThan' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:113:52:
          112|         # XXX: The size is somewhat arbitrary
          113|         passAsFile = if builtins.stringLength pkgs >= 128 * 1024 then [ "pkgs" ] else [ ];
             |                                                    ^
          114|       }

       … while calling the 'stringLength' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:113:25:
          112|         # XXX: The size is somewhat arbitrary
          113|         passAsFile = if builtins.stringLength pkgs >= 128 * 1024 then [ "pkgs" ] else [ ];
             |                         ^
          114|       }

       … while calling the 'toJSON' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:108:16:
          107|           ;
          108|         pkgs = builtins.toJSON chosenOutputs;
             |                ^
          109|         extraPathsFrom = lib.optional includeClosures (writeClosure pathsForClosure);

       … while evaluating list element at index 21

       … while evaluating attribute 'paths'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:68:7:
           67|     chosenOutputs = map (drv: {
           68|       paths =
             |       ^
           69|         # First add the usual output(s): respect if user has chosen explicitly,

       … while evaluating list element at index 0
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/build-support/buildenv/default.nix:68:7:
           67|     chosenOutputs = map (drv: {
           68|       paths =
             |       ^
           69|         # First add the usual output(s): respect if user has chosen explicitly,

       … while calling the 'getAttr' builtin
         at <nix/derivation-internal.nix>:50:17:
           49|     value = commonAttrs // {
           50|       outPath = builtins.getAttr outputName strict;
             |                 ^
           51|       drvPath = strict.drvPath;

       … while calling the 'derivationStrict' builtin
         at <nix/derivation-internal.nix>:37:12:
           36|
           37|   strict = derivationStrict drvAttrs;
             |            ^
           38|

       … while evaluating derivation 'emulationstation-de-3.2.0'
         whose name attribute is located at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'buildInputs' of derivation 'emulationstation-de-3.2.0'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/make-derivation.nix:535:13:
          534|             depsHostHost = elemAt (elemAt dependencies 1) 0;
          535|             buildInputs = elemAt (elemAt dependencies 1) 1;
             |             ^
          536|             depsTargetTarget = elemAt (elemAt dependencies 2) 0;

       … in the condition of the assert statement
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/lib/customisation.nix:401:15:
          400|             outPath =
          401|               assert condition;
             |               ^
          402|               drv.${outputName}.outPath;

       … while evaluating the attribute 'handled'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/check-meta.nix:653:9:
          652|         # or, alternatively, just output a warning message.
          653|         handled = (
             |         ^
          654|           if valid == "yes" then

       … from call site
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/check-meta.nix:657:14:
          656|           else if valid == "no" then
          657|             (handleEvalIssue { inherit meta attrs; } { inherit (validity) reason errormsg; })
             |              ^
          658|           else if valid == "warn" then

       … while calling 'handleEvalIssue'
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/check-meta.nix:301:5:
          300|     { meta, attrs }:
          301|     {
             |     ^
          302|       reason,

       … while calling the 'throw' builtin
         at /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/stdenv/generic/check-meta.nix:318:5:
          317|     in
          318|     handler msg;
             |     ^
          319|

       error: Package ‘freeimage-3.18.0-unstable-2024-04-18’ in /nix/store/d7s7pkgp0shkac0qwf2f9w956fi6rh1i-source/pkgs/by-name/fr/freeimage/package.nix:114 is marked as insecure, refusing to evaluate.


       Known issues:
        - CVE-2024-31570
        - CVE-2024-28584
        - CVE-2024-28583
        - CVE-2024-28582
        - CVE-2024-28581
        - CVE-2024-28580
        - CVE-2024-28579
        - CVE-2024-28578
        - CVE-2024-28577
        - CVE-2024-28576
        - CVE-2024-28575
        - CVE-2024-28574
        - CVE-2024-28573
        - CVE-2024-28572
        - CVE-2024-28571
        - CVE-2024-28570
        - CVE-2024-28569
        - CVE-2024-28568
        - CVE-2024-28567
        - CVE-2024-28566
        - CVE-2024-28565
        - CVE-2024-28564
        - CVE-2024-28563
        - CVE-2024-28562
        - CVE-2024-9029
        - CVE-2023-47996
        - CVE-2023-47994
        - CVE-2023-47993
        - CVE-2023-47992
        - CVE-2021-40265
        - CVE-2021-40264
        - CVE-2021-40262
        - CVE-2020-24294
        - CVE-2020-21426
        - CVE-2019-12214
        - CVE-2019-12212

       You can install it anyway by allowing this package, using the
       following methods:

       a) To temporarily allow all insecure packages, you can use an environment
          variable for a single invocation of the nix tools:

            $ export NIXPKGS_ALLOW_INSECURE=1

          Note: When using `nix shell`, `nix build`, `nix develop`, etc with a flake,
                then pass `--impure` in order to allow use of environment variables.

       b) for `nixos-rebuild` you can add ‘freeimage-3.18.0-unstable-2024-04-18’ to
          `nixpkgs.config.permittedInsecurePackages` in the configuration.nix,
          like so:

            {
              nixpkgs.config.permittedInsecurePackages = [
                "freeimage-3.18.0-unstable-2024-04-18"
              ];
            }

       c) For `nix-env`, `nix-build`, `nix-shell` or any other Nix command you can add
          ‘freeimage-3.18.0-unstable-2024-04-18’ to `permittedInsecurePackages` in
          ~/.config/nixpkgs/config.nix, like so:

            {
              permittedInsecurePackages = [
                "freeimage-3.18.0-unstable-2024-04-18"
              ];
            }
